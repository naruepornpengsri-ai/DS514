# Heart Failure Prediction
โครงการวิเคราะห์ข้อมูลและการสร้างโมเดล Machine Learning

---

## 1. บทนำ (Introduction)

โรคหัวใจเป็นสาเหตุการเสียชีวิตอันดับต้นๆ การวินิจฉัยต้องอาศัยแพทย์ผู้เชี่ยวชาญและเครื่องมือเฉพาะทาง 
ปัญหา คือ เราจะสามารถใช้ข้อมูลจากการตรวจสุขภาพพื้นฐานและอาการทางคลินิก (เช่น อายุ, ระดับคอเลสเตอรอล, ผลคลื่นไฟฟ้าหัวใจ, อาการเจ็บหน้าอก) มาวิเคราะห์เพื่อระบุปัจจัยเสี่ยงที่สำคัญ 
และสร้างแบบจำลองเพื่อทำนายความน่าจะเป็นของการเกิดโรคหัวใจได้อย่างไร เพื่อช่วยในการคัดกรองผู้ป่วยเบื้องต้นอย่างมีประสิทธิภาพ

---

## 2. วัตถุประสงค์ (Objectives/Value Propositions)

SMART Objectives:
          เพื่อวิเคราะห์และจัดลำดับปัจจัยทางคลินิก (เช่น ChestPainType, ST_Slope, MaxHR) จำนวน 3-5 อันดับแรก ที่มีความสัมพันธ์กับโรคหัวใจสูงที่สุด (High Correlation) เพื่อใช้เป็นเกณฑ์หลักในการคัดกรองผู้ป่วยกลุ่มเสี่ยงเบื้องต้น ให้แล้วเสร็จภายใน 3 เดือน

Value Propositions:
Non-invasive Screening Tool: เป็นเครื่องมือคัดกรองความเสี่ยงเบื้องต้นที่ไม่เจ็บตัว และ ประหยัดค่าใช้จ่าย เพราะใช้เพียงข้อมูลพื้นฐาน (อายุ, ความดัน, การซักประวัติ) แทนการตรวจด้วยเครื่องมือราคาแพง

Early Detection: ช่วยให้แพทย์สามารถตรวจพบผู้ที่มีความเสี่ยงสูงได้เร็วขึ้น (Early Stage) ซึ่งเพิ่มโอกาสในการรักษาและลดอัตราการเสียชีวิต

Resource Optimization: ช่วยลดภาระงานของแพทย์ โดยระบบจะช่วยจัดลำดับความสำคัญ (Triage) ให้แพทย์โฟกัสกลุ่มเสี่ยงสูงก่อน


---

## 3. คำถามและสมมติฐาน (Questions / Hypothesis)


### คำถาม (Questions)
- เพศมีผลต่อความเสี่ยง โดยคาดว่าเพศชายอาจมีความเสี่ยงในการเกิดโรคหัวใจสูงกว่าเพศหญิง
- ผู้ที่มีอายุมากกว่า มีแนวโน้มที่จะมีความเสี่ยงเป็นโรคหัวใจสูงกว่าผู้ที่มีอายุน้อย
- ผู้ที่มีอาการเจ็บหน้าอกขณะออกกำลังกาย (Exercise Angina = Yes) น่าจะมีความเสี่ยงในการเป็นโรคหัวใจสูงกว่าผู้ที่ไม่มีอาการอย่างชัดเจน
- ผู้ที่มีอาการเจ็บหน้าอก มีแนวโน้มเป็นโรคหัวใจมากกว่าผู้ที่ไม่มีอาการเจ็บหน้าอก
- อัตราการเต้นของหัวใจสูงสุด (MaxHR) น่าจะมีความสัมพันธ์เชิงบวกกับโรคหัวใจ คือ ผู้ที่เป็นโรคหัวใจน่าจะทำ MaxHR ได้สูงกว่าคนปกติ
- ค่า Oldpeak (ST depression) ยิ่งสูง น่าจะยิ่งสัมพันธ์กับโอกาสการเป็นโรคหัวใจที่สูงขึ้น
- ผู้ที่มีลักษณะกราฟ ST Slope แบบ Flat หรือ Down น่าจะมีโอกาสในการเป็นโรคหัวใจ สูงกว่า ผู้ที่มี ST Slope แบบ Up

### สมมติฐาน (Hypothesis)
สามารถทำนายโอกาสในการเป็นโรคหัวใจจากปัจจัยส่วนบุคคล (อายุ เพศ) อาการทางคลินิก (อาการเจ็บหน้าอกขณะออกกำลังกาย, อาการเจ็บหน้าอก) และ ผลตรวจวัดค่าร่างกาย (อัตราการเต้นของหัวใจสูงสุด, ค่า Oldpeak ) ได้


---

## 4. แหล่งที่มาของข้อมูล (Data Source)

- **Dataset:** Heart Failure Prediction Dataset  
- **Source:** Kaggle  
- ข้อมูลถูกจัดเตรียมสำหรับงาน Classification  

---

## 5. รายละเอียดข้อมูล (Dataset Description)

### ตัวแปรเป้าหมาย (Target Variable)
- `HeartDisease`
  - `0` = ไม่เป็นโรคหัวใจ  
  - `1` = เป็นโรคหัวใจ  

### ตัวแปรอิสระ (Features)

**Numerical Variables**
- Age  
- RestingBP  
- Cholesterol  
- MaxHR  
- Oldpeak  

**Categorical Variables**
- Sex  
- ChestPainType  
- RestingECG  
- ExerciseAngina  
- ST_Slope  
- FastingBS  

---

## 6. การวิเคราะห์ข้อมูลเชิงสำรวจ  
(Exploratory Data Analysis: EDA)

- ตรวจสอบการกระจายของข้อมูลแต่ละตัวแปร  
- วิเคราะห์ความสัมพันธ์ระหว่างตัวแปรด้วย Correlation Heatmap  
- เปรียบเทียบลักษณะข้อมูลระหว่างกลุ่มปกติและกลุ่มผู้ป่วย  
- ใช้กราฟ Bar Chart และ  Pie Chart เพื่อแสดงความแตกต่างของข้อมูล  

---

## 7. การพัฒนาโมเดล (Model Development)

### 7.1 การเตรียมข้อมูล (Data Preparation)
- แยกข้อมูลเป็น Features และ Target  
- แปลงข้อมูลเชิงกลุ่มให้อยู่ในรูปแบบเชิงตัวเลข  
- แบ่งข้อมูลเป็น Training Set และ Test Set  

### 7.2 โมเดลที่ใช้ในการศึกษา

**Logistic Regression**
- เป็นโมเดลพื้นฐานสำหรับงาน Classification  
- สามารถอธิบายผลลัพธ์และความสำคัญของตัวแปรได้ง่าย  

**K-Nearest Neighbors (KNN)**
- ใช้หลักการวัดความใกล้เคียงของข้อมูล  
- เหมาะสำหรับการเปรียบเทียบรูปแบบของผู้ป่วยที่มีลักษณะคล้ายกัน  

### 7.3 การประเมินประสิทธิภาพของโมเดล

ตัวชี้วัดที่ใช้:
- Accuracy  
- Precision  
- Recall  
- F1-Score  
- Confusion Matrix  

---

## 8. ผลการทดลอง (Results)

| Model | Accuracy | Precision | Recall |
|------|----------|-----------|--------|
| Logistic Regression | 85.33% | 82.89% | 87.50% |
| K-Nearest Neighbors | 87.33% | 88.41% | 84.72% |

**สรุปผล:**  
โมเดล KNN ให้ความแม่นยำสูงกว่าเล็กน้อย  
ในขณะที่ Logistic Regression มีความเหมาะสมในการอธิบายผลเชิงวิชาการและเชิงการแพทย์  

---

## 9. สรุปผลการวิเคราะห์ (Findings)

จากการวิเคราะห์ข้อมูลใน Dataset นี้ พบว่า อายุ เพศ อาการเจ็บหน้าอกประเภทการเจ็บหน้าอก การเจ็บหน้าอกขณะออกกำลังกายความชันช่วง ST อัตราการเต้นของหัวใจและระดับคอเลสเตอรอล เป็นตัวแปรสำคัญที่ส่งผลต่อการเกิดโรคหัวใจโดยกลุ่มเสี่ยงที่มีโอกาสเป็นโรคหัวใจมากที่สุด คือ

- เพศชายมีโอกาสเป็นโรคหัวใจมากถึง 56%
- อายุ 55 - 75 ปีมีโอกาสเป็นโรคหัวใจมากกว่า 58%
- ผู้ที่ไม่มีอาการเจ็บหน้าอกมีโอกาสเป็นโรคหัวใจมากถึง 74%
- ผู้ที่มีอาการเจ็บหน้าอกขณะออกกำลังกายเป็นกลุ่มเสี่ยงในการเป็นโรคหัวใจ
- ผู้ที่มีความชันของช่วง ST (ST segment) บนคลื่นไฟฟ้าหัวใจ (ECG) แบบ Flat และ Down
- ผู้ที่มีอัตราการเต้นของหัวใจต่ำกว่า 130 bpm เนื่องจากหัวใจอ่อนแรง
- ผู้ที่มีระดับคอเลสเตอรอลสูงกว่า 250 mg/dL
- กลุ่มผู้ป่วยโรคหัวใจมีค่า Oldpeak เฉลี่ยสูงกว่ากลุ่มที่ไม่เป็นโรคหัวใจ โดยค่า Oldpeak คือ ระดับ ST depression ที่ตรวจวัดจากคลื่นไฟฟ้าหัวใจ (ECG) ในช่วงการออกกำลังกายเมื่อเทียบกับขณะพัก
---

## 10. ข้อเสนอแนะ (Recommendations)

- ควรมีการตรวจคัดกรองสุขภาพให้กับประชาชนช่วงอายุ 55-75 ปี เนื่องจากเป็นกลุ่มเสี่ยงสูงที่จะเป็นโรคหัวใจ โดยเฉพาะในกลุ่มเพศชาย
- สร้างความตระหนักถึงภัยเงียบของโรคหัวใจ แม้ว่าจะไม่มีอาการเจ็บหน้าอกเป็นสัญญาณ เนื่องจากยังคงเป็นตัวแปรสำคัญอย่างหนึ่งในการเกิดโรคหัวใจ
- สำหรับผู้ที่ไม่มีอาการเจ็บหน้าอก ควรได้รับการตรวจ ECG เพื่อดู ST Slope และ Oldpeak


---

## 11. เครื่องมือที่ใช้ (Tools & Libraries)

- Python  
- Pandas, NumPy  
- Matplotlib, Seaborn  
- OneHotEncoder
- StandardScaler
- train_test_split
- LogisticRegression
- KNeighborsClassifier
- accuracy_score 
- classification_report
- confusion_matrix
---


